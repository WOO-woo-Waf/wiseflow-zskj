
# 一、PPT 分块内容大纲

## 1. 产品整体架构

* 四大模块：

  * Pocket Beats 数据库（知识库）
  * 爬虫模块（定时任务 + LLM 摘要）
  * 后端（FastAPI API 服务）
  * 前端（React + Vite）
* 前后端分离架构，异步 + 并发设计

---

## 2. Pocket Beats 数据库

* 存储原始数据 + 模型摘要
* 支持结构化与非结构化数据
* 提供知识库检索功能
* 与后端紧密集成（ORM）

---

## 3. 爬虫模块

* **后台自动执行**，定时爬取目标网站
* 根据用户配置的信源和关注点抓取数据
* 调用 LLM（OpenAI API 封装）生成文本摘要
* 技术栈：

  * `httpx`（异步请求）、`asyncio`（并发调度）
  * `BeautifulSoup`（网页解析）、`gne`（正文提取）
  * `json_repair`（数据修复）、`dotenv`（配置管理）
* 输出结果自动写入数据库

---

## 4. 后端程序

* 技术栈：FastAPI + Pydantic + Uvicorn
* 功能：

  * 提供 API 给前端调用
  * 调度爬虫任务
  * 数据库读写接口
* 日志与监控：loguru

---

## 5. 前端程序

* 技术栈：React 18 + Vite
* 功能：

  * 配置信源与关注点
  * 实时展示知识库与摘要
  * 支持报告导出与可视化
* UI 框架：TailwindCSS / Ant Design

---

## 6. 报告生成模块

* 自动将数据与摘要整理成报告
* 技术栈：`python-docx`
* 报告支持：标题、正文、样式控制（字体/颜色/对齐）

---

## 7. 数据流向

* 用户配置 → 爬虫定时抓取 → 模型摘要 → 数据库存储 → 前端展示 → 报告导出

---

# 二、详细技术报告

## 1. 产品整体架构

本产品采用 **前后端分离架构**，由数据库、爬虫模块、后端程序、前端程序四部分组成。系统通过异步爬取与大语言模型（LLM）处理，构建智能知识库，并提供可视化交互与报告生成功能。

---

## 2. Pocket Beats 数据库（知识库模块）

**功能定位**：

* 存储爬虫采集的原始内容、模型生成的摘要及用户配置信息。
* 作为系统的知识库，支持检索与调用。

**技术实现**：

* 支持关系型（PostgreSQL/MySQL）或文档型（MongoDB）数据库。
* 使用 ORM（如 SQLAlchemy）与后端对接，提供数据对象化操作。
* 数据结构：

  * 原始网页内容
  * 文本摘要
  * 元数据（URL、时间戳、信源类型、用户 ID）

---

## 3. 爬虫模块

**功能定位**：

* 持续在后台运行，通过定时任务定期抓取目标网站。
* 抓取后调用大模型生成摘要，并写入数据库。

**技术实现**：

* **异步与并发**：

  * `httpx` + `asyncio` 提供高并发抓取能力。
* **内容解析**：

  * `BeautifulSoup` 解析网页结构。
  * `gne (GeneralNewsExtractor)` 自动提取正文内容。
* **文本处理**：

  * `re` 进行正则清洗。
  * `json_repair` 修复不规范 JSON。
  * `utils.general_utils.extract_and_convert_dates` 解析时间。
* **智能摘要**：

  * `llms.openai_wrapper.openai_llm` 调用大模型 API，生成摘要。
  * `smart_crawler` 封装 LLM + 规则解析逻辑。
* **调度与配置**：

  * `dotenv` 读取环境配置（API Key、定时规则）。
  * 定时任务（可基于 `cron` 或 `APScheduler` 实现）。

**运行机制**：

* 后台自动执行，无需人工触发。
* 定期（如每小时/每天）扫描信源，更新知识库内容。

---

## 4. 后端程序（FastAPI）

**功能定位**：

* API 网关，承接前端请求与数据库、爬虫的交互。
* 调用爬虫模块、知识库模块，返回数据给前端。

**技术实现**：

* **框架**：FastAPI（高性能异步 API 框架）。
* **数据校验**：Pydantic。
* **运行环境**：Uvicorn / Gunicorn（ASGI 服务）。
* **日志管理**：loguru（支持分级日志与错误追踪）。
* **安全性**：环境变量管理（dotenv），保证 API Key、数据库密码安全。

---

## 5. 前端程序（React + Vite）

**功能定位**：

* 用户操作入口，提供可视化界面。
* 用户可配置信源、查看知识库与报告。

**技术实现**：

* **框架**：React 18 + Vite（轻量快速开发体验）。
* **数据交互**：Axios / Fetch 调用 FastAPI 接口。
* **UI 框架**：TailwindCSS / Ant Design。
* **状态管理**：React Hooks / Redux（可选）。
* **路由管理**：React Router。

---

## 6. 报告生成模块

**功能定位**：

* 自动生成 Word 报告，包含爬虫结果与模型摘要。

**技术实现**：

* **库**：`python-docx`。
* **样式控制**：

  * 字体大小、颜色（`Pt`, `RGBColor`）。
  * 对齐方式（`WD_PARAGRAPH_ALIGNMENT`）。
* **文档管理**：支持封面、目录、分章节导出。

---

## 7. 数据流向说明

1. 用户在前端配置爬虫信源与关注点。
2. 爬虫模块根据配置定时抓取网页，调用 LLM 生成摘要。
3. 数据写入数据库（知识库），保存原文与摘要。
4. 后端提供 API 给前端，前端展示数据。
5. 用户可选择导出报告，调用报告生成模块。

